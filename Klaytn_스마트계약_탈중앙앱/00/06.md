# 블록체인에서 사용되는 암호화 기법

**_강의: [섹션0-블록체인에서 사용되는 암호화 기법](https://www.inflearn.com/course/lecture?courseSlug=klaytn-%EC%8A%A4%EB%A7%88%ED%8A%B8%EA%B3%84%EC%95%BD%EA%B3%BC-%ED%83%88%EC%A4%91%EC%95%99%EC%95%B1&unitId=30498&tab=curriculum)_**

- 블록체인은 암호학적 기법을 토대로 만들어진 기술

  - 비트코인은 네트워크 참여자 모두가 같은 `원장`을 공유함으로써 투명한 거래가 가능
  - 원장은 어느 주소에 BTC가 있는지 기록하지만, **그 주소가 누구에 속하는지는 기록하지 않음**(anonymity)
  - 비트코인은 `공개키암호`를 사용하여 **명시적인 비밀교환과정 없이** BTC의 소유권 증명을 실행
    <br>

  <img width="921" alt="스크린샷 2024-03-18 오후 5 13 59" src="https://github.com/lbo728/BlockChainStudy/assets/72309817/018cab3c-c67c-4aa1-be60-df02c0599c41">

<br>

### 공개키암호화를 사용한 소유권 증명

- 대부분의 블록체인 주소는 `공개키`로부터 도출된 값
  - Bitcoin: Hash160 of public key where Hash160 = RIPEMD160 + SHA256
  - Ethereum: Rightmost 160 bits of Keccak hash of a public key
- Bitcoin의 경우
  - 임의의 주소 X에 10 BTC가 있다고 가정할 때 Alice는 X에서 또다른 임의의 주소 Y로 5 BTC를 전송(i.e.,transfer 5 BTC from X to Y)하는 거래를 성사시키기 위해 X로 변환되는 공개키와 짝을 이루는 비밀키로 해당 거래를 서명할 수 있어야 한다.
- Ethereum의 경우
  - 임의의 주소 X에 위치한 어카운트의 잔고에 10 ETH가 있다고 가정할 때 Alice는 X에서 또다른 임의의 주소 Y에 위치한 어카운트로 5 ETH를 전송(i.e., transfer 5 ETH from the account at X to the account at Y)하는 거래를 성사시키기 위해 X로 변환되는 공개키와 짝을 이루는 비밀키로 해당 거래를 서명할 수 있어야 한다.

<br>

### 구현 방법으로 나눠본 블록체인

#### UTXO (Unspent Transaction Output) 기반 블록체인

- 블록체인에 사용 가능한 토큰(e.g., Bitcoin) - UTXO들과 사용 자격검증밥법을 기록
- 일반적인 자격검증방법은 `UTXO의 정보와 일치하는 공개키`로 검증가능한 `전자서명`을 제출하는 것
- Bitcoin이 대표적인 UTXO 기반 블록체인
- 돈이 그 자체로 암호화되어 있고, 그 돈을 쓸 때 전자 서명을 준다.
  - 돈에 주소를 줌으로써 보안성도 강화하고 병렬화가 가능한 구조

#### 어카운트 기반 블록체인 (Account-based Blockchain)

- 어카운트는 블록체인을 구성하는 주체(entity)를 표현하며 상태를 기록
- 사용자는 어카운트를 사용할 때마다 `어카운트 공개키`로 검증가능한 `전자서명`을 생성
- **상태를 기록할 수 있기 때문에** `스마트 컨트랙트`를 구현하기 용이
- Ethereum, Klaytn이 대표적인 어카운트 기반 블록체인
- 어떤 어카운트를 사용하기 위해 전자 서명을 준다.
  - 어카운트는 한 번에 여러 가지를 못하고, 순서대로 해야 함 → 순서가 바뀌면 결과값이 바뀌기 때문
    - 대신 `상태`가 생김

<br>

### Ethereum 어카운트, 주소, 상태

- Ethereum 어카운트는 Ethereum의 주체(entity)를 표현하고 그 상태를 기록하는데 사용
- 어카운트는 `EOA`(Externally Owned Acount)와 `스마트 컨트랙트`로 구분
- Ethereum 사용자는 EOA를 사용
- 사용자는 임의의 공개키와 비밀키 쌍(Key Pair)을 생성한 뒤 공개키를 어카운트 주소로 변환하여 EOA를 생성
  - 별도의 승인과정이 필요없으며 Ethereum 네트워크와 통신도 필요없음
  - 위 과정으로 인해 어카운트는 **특정 키페어에 종속**
- 사용자의 상태(state)는 어카운트 주소로 찾을 수 있는 **블록체인 저장공간에 기록**
  <br>

  <img width="686" alt="스크린샷 2024-03-18 오후 5 29 04" src="https://github.com/lbo728/BlockChainStudy/assets/72309817/98fc85ae-4940-4fe5-a2c4-4fa9346e7860">

  > 트랜잭션: 블록체인의 저장 구조에서 `저장의 단위`, `정보의 단위`
  > 역사: 비트코인이 금융 어플리케이션이었고, 비트코인은 결국 어느 주소에서 어느 주소로 돈을 옮기는 수단인데, 은행권에서는 이 돈의 흐틈을 트랜잭션이라고 표현한다. "트랜잭션이 잘들어갔습니다." , "트랜잭션이 체결되었습니다."라는 표현도 전부 금융권의 영향으로 만들어진 것
